<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>Atlas Sunucu Bağlantısı</title>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; display: flex; justify-content:center; align-items:center; height:100vh; margin:0; }
        .box { border: 1px solid #0f0; padding: 30px; text-align: center; box-shadow: 0 0 15px #0f0; }
    </style>
</head>
<body>
    <div class="box">
        <h2>ATLAS GATEWAY</h2>
        <p id="status">Güncel Tünel Aranıyor...</p>
        <div id="loader">_</div>
    </div>

    <script>
        async function fetchTunnel() {
            const domain = "atlasalan"; // Örn: atlasalan
            const token = "0ba0dd27-a463-4c4a-9510-c43020097932";
            
            try {
                // DuckDNS API'den TXT kaydını (tünel linkini) çekiyoruz
                // Not: Güvenlik için TXT kaydı sorgusu
                const response = await fetch(`https://www.duckdns.org/update?domains=${domain}&token=${token}&get=1`);
                const data = await response.text();
                
                // DuckDNS TXT içeriğinde "https://...trycloudflare.com" linkini bul
                const match = data.match(/https:\/\/[a-z0-9-]+\.trycloudflare\.com/);
                
                if (match) {
                    document.getElementById('status').innerText = "Tünel Bulundu! Yönlendiriliyor...";
                    setTimeout(() => {
                        window.location.replace(match[0] + "?ref=atlas_gateway");
                    }, 1000);
                } else {
                    document.getElementById('status').innerText = "Tünel henüz aktif değil. Lütfen bekleyin...";
                    setTimeout(fetchTunnel, 3000);
                }
            } catch (err) {
                document.getElementById('status').innerText = "Bağlantı Hatası! Yenileniyor...";
                setTimeout(fetchTunnel, 3000);
            }
        }
        fetchTunnel();
    </script>
</body>
</html>
